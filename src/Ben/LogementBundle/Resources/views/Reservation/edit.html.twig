{% extends "BenLogementBundle::layout.html.twig" %}
{% block title %}
Tableau de bord | {{ parent() }}
{% endblock %}
{% block body %}
<h3>Modification d'une réservation</h3>

<form class="form-horizontal" action="{{ path('reservation_update', { 'id': entity.id }) }}" method="post" {{ form_enctype(form) }}>
  {% include "BenLogementBundle:Reservation:form.html.twig" %}

    <div class="form-group">
      <div class="col-sm-offset-4 col-sm-4">
        <button type="submit" name="subvalider" class="btn btn-primary"><span class="glyphicon glyphicon-edit"></span> Mettre à jour</button>
        <button id="js-delete" class="btn btn-danger"><span class="glyphicon glyphicon-trash"></span> Supprimer</button>
      </div>
    </div>

<form id="deleteForm" action="{{ path('reservation_delete', { 'id': entity.id }) }}" method="post">
    {{ form_widget(delete_form) }}
</form>

{% endblock body %}
{% block javascripts %}
{{ parent() }}
<script> 
(function($) {
  
    var roomInput = $('#reservationtype_room'),
        jsroom = $('#js-room'),
        jsblock = $('#js-block'),
        closeBtn = $('#infoModal').find('.close');

    roomInput.closest('.form-group').hide().prev().hide();   
    $('#js-delete').on('click', function(){
            $('#deleteForm').submit();
            return false;
        });
    $('#dataContainer').on('click', '.js-check', function(){
      var id = $(this).data('id'),
          data = $(this).closest('tr').find('td');
      roomInput.val(id);
      jsroom.val(data[0].innerHTML);
      jsblock.val(data[2].innerHTML);
      closeBtn.trigger('click');
    });

})(jQuery);
</script>
{% endblock %}