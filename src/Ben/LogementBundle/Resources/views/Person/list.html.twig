{% extends "BenLogementBundle::layout.html.twig" %}
{% block title %}
Tableau de bord | {{ parent() }}
{% endblock %}
{% block body %}

 <h3><span class="glyphicon glyphicon-user"></span> Elaboration des listes</h3>
    <form  id="form1" role="form" method="post" action="">
      <div class="row">
        <div class="col-md-5">
          <div class="form-group">
            <label class="col-md-8 control-label" for="">Nombre de candidat éligible</label>
            <div class="col-md-4 form-group">
              <input class="form-control" id="" type="number" name="limit" required="required">
            </div>
          </div>
        </div><!-- /.col-md-3 -->        
        <div class="col-lg-2">
          <div class="col-md-9">
          <select id="js-perpage" name="gender" class="form-control">
            <option value="Fille" >Fille</option>
            <option value="Garçon" >Garçon</option>
          </select>
          </div>
        </div>


        <div class="col-md-5">
          <div class="btn-group pull-right">              
            <button class="btn btn-primary" type="submit"><span class="glyphicon glyphicon-cog"></span> Lancer</button>
            <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
              <li><a href="#" id="js-submit"><span class="glyphicon glyphicon-ok-circle"></span> Valider</a></li>
              <li><a href="#" id="btnApprouver"><span class="glyphicon glyphicon-export"></span> Exporter</a></li>
              <li><a href="#"><span class="glyphicon glyphicon-print"></span> Imprimer</a></li>
            </ul>
          </div>
        </div>
      </div><!-- /.row -->
  </form>
  <form  id="form2" role="form" method="post" action="{{ path('etudiant_validate_list') }}">
    <table class="table table-striped table-hover table-bordered">
        <thead>
            <tr>
                <th>#</th>
                <th>Dossier</th>
                <th>Nom</th>
                <th>Email</th>
                <th>CIN</th>
                <th>CNE</th>
                <th>Etablissement</th>
                <th>Note</th>
            </tr>
        </thead>
        <tbody id="dataContainer">
        {% for entity in entities %}
            <tr>
                <td>{{ loop.index }} <input type="hidden" name="entities[]" value="{{ entity.id }}"></td>
                <td>{{ entity.ndossier }}</td>
                <td><a href="{{ path('etudiant_show', { 'id': entity.id }) }}">{{ entity.fullName }}</a></td>
                <td><a href="mailto:{{ entity.email }}">{{ entity.email }}</a></td>
                <td>{{ entity.type }}</td>
                <td>{{ entity.cne }}</td>
                <td>{{ entity.etablissement }}</td>
                <td>{{ entity.note }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
  </form>
{% endblock body %}
{% block javascripts %}
{{ parent() }}
<script> 
    (function($) {

        $('#js-submit').on('click', function(){
            $('#form2').submit();
            return false;
        });
    })(jQuery);
</script>
{% endblock %}